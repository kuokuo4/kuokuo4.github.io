# kekeğŸ± - å‰ç«¯å‘½ä»¤è¡Œå·¥å…·

[![JavaScript Style Guide](https://img.shields.io/badge/code_style-standard-brightgreen.svg)](https://standardjs.com)

## å…ˆå‰æ­¥éª¤

åœ¨`.npmrc`æˆ–`.yarnrc`ä¸­è®¾ç½®å³åˆ»registry`https://npm.midway.run`

## å®‰è£…

å…¨å±€å®‰è£…ï¼š `npm -g install @ruguoapp/keke-cli` or `yarn global add @ruguoapp/keke-cli`

æˆ–ä»…ä½œä¸ºé¡¹ç›®å¼€å‘ä¾èµ–å®‰è£…ï¼š`npm install @ruguoapp/keke-cli --save-dev` or `yarn add @ruguoapp/keke-cli -D`

æˆ–ä½¿ç”¨homebrewå®‰è£…å…¨å±€å‘½ä»¤[WIP]

## æ·»åŠ åˆ°scripts

å¼€å‘ä¸­å»ºè®®ç›´æ¥æ·»åŠ åˆ°`package.json`çš„`scripts`å®ç°è‡ªåŠ¨åŒ–å‘å¸ƒï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š

``` json
 "scripts": {
    ...
    "surge": "npm run build && keke surge",
    "surge:prod": "npm run build && keke surge --prod",
  }
```

## ä½¿ç”¨

```bash
$ keke -h
Usage: keke [options] [command]

Options:
  -V, --version                      output the version number
  -h, --help                         output usage information

Commands:
  login                              ç™»å½•authcenterï¼Œè¯·æ ¹æ®æç¤ºæ“ä½œã€‚
  upload [options] <source>          å°†æ–‡ä»¶/æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°OSS
  publish [options] <source> [name]  å°†é¡¹ç›®å¿«ç…§ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ä½¿ç”¨sourceé€‰é¡¹æŒ‡å®šè¦ä¸Šä¼ çš„ç›®å½•ï¼Œnameä¸ºé¡¹ç›®åï¼Œå¦‚æœä¸å¡«å†™å°†ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ä¸‹package.jsoné‡Œçš„nameé…ç½®ã€‚
  release [options] [name]           å°†é¡¹ç›®å¿«ç…§å‘å¸ƒåˆ°çº¿ä¸Šç¯å¢ƒã€‚nameä¸ºé¡¹ç›®åï¼Œå¦‚æœä¸å¡«å†™å°†ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ä¸‹package.jsoné‡Œçš„nameé…ç½®ã€‚
  history [options] [name]           æŸ¥çœ‹é¡¹ç›®çš„å‘å¸ƒå†å²ã€‚nameä¸ºé¡¹ç›®åï¼Œå¦‚æœä¸å¡«å†™å°†ä½¿ç”¨package.jsoné‡Œçš„nameé…ç½®ã€‚
  qrcode [options] <msg>             åœ¨ç»ˆç«¯æ˜¾ç¤ºå†…å®¹ä¸º<msg>çš„äºŒç»´ç ã€‚
  meow                               çœ‹çœ‹ç§‘ç§‘
```

## å‘½ä»¤

### login

ä½¿ç”¨loginå‘½ä»¤æ¥ç™»å½•auth centerè´¦å·ï¼Œå¦‚æœtokenè¿‡æœŸå¯èƒ½éœ€è¦é‡æ–°ç™»å½•ã€‚ç›®å‰åªæ”¯æŒéªŒè¯ç ç™»å½•ã€‚

ä½¿ç”¨æ–¹æ³•ï¼š
``` bash
$ keke login
```


### surge

ä½¿ç”¨æ–¹æ³•ï¼š
``` bash
$ keke surge
Usage: surge [options] [source]

ä½¿ç”¨surgeå‘½ä»¤æ¥è¿›è¡Œä¸€é”®ä¸Šä¼ å‘ç‰ˆï¼Œsurgeå‘½ä»¤ä¼šä¾æ¬¡æ‰§è¡Œuploadï¼Œpublishï¼Œreleaseä¸‰ä¸ªæ­¥éª¤ã€‚ç¬¬ä¸€æ¬¡è¿è¡Œsurgeå‘½ä»¤å°†ä¼šæœ‰ä¸€ä¸ªäº¤äº’å¼å‘½ä»¤è¡Œæ¥å¸®åŠ©ä½ ç”Ÿæˆä¸€äº›é…ç½®ã€‚

Options:
  -n, --name [codename]          é¡¹ç›®å
  -g, --group [group]            é¡¹ç›®ç»„å
  --prod [boolean]               å‘å¸ƒåˆ°prodç¯å¢ƒï¼Œå¦‚æœä¸å¼€å¯æ­¤é¡¹é…ç½®å°†é»˜è®¤å‘å¸ƒåˆ°betaç¯å¢ƒ
  -p, --prefix [prefix]          ä¸Šä¼ åˆ°OSSçš„å‰ç¼€ï¼Œä¼šè‡ªåŠ¨ç”Ÿæˆã€‚å¦‚æœä½ ä¸äº†è§£æ€ä¹ˆå†™å¯ä»¥ç•™ç©ºã€‚
  -c, --concurrent [concurrent]  the number of concurrent upload.
  --allow-sourcemap [boolean]    allow sourcemap uploading.
  -h, --help                     output usage information

```

### upload

``` bash
$ keke upload -h
Usage: upload [options] <source>

å°†æ–‡ä»¶/æ–‡ä»¶å¤¹ä¸Šä¼ åˆ°OSS

Options:
  -p, --prefix [prefix]          é¡¹ç›®åï¼Œå¿…å¡«
  -c, --concurrent [concurrent]  the number of concurrent upload.
  --allow-sourcemap [boolean]    allow sourcemap uploading.
  -h, --help                     output usage information
```

ç¤ºä¾‹ï¼š
``` bash
// å°†distç›®å½•é‡Œçš„æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ åˆ°https://static.codefuture.top/mobile-site/
keke upload ./dist -n mobile-site
```
<img src="doc/images/upload-success.png" width="600px"/>

åœ¨ä¸Šä¼ æ—¶kekeä¼šå°†pngæˆ–jpegæ–‡ä»¶å‹ç¼©åä¸Šä¼ ï¼Œä¸è¿‡ä»ç„¶å¯ä»¥é€šè¿‡åœ¨æ–‡ä»¶æœ«å°¾åŠ `.raw`æ¥è®¿é—®æœªç»å‹ç¼©çš„åŸå›¾ã€‚

### publish

``` bash
$ keke publish -h
Usage: publish [options] <source>

å°†é¡¹ç›®å¿«ç…§ä¸Šä¼ åˆ°æœåŠ¡å™¨ã€‚ä½¿ç”¨sourceé€‰é¡¹æŒ‡å®šè¦ä¸Šä¼ çš„ç›®å½•ï¼Œnameä¸ºé¡¹ç›®åï¼Œå¦‚æœä¸å¡«å†™å°†ä½¿ç”¨å½“å‰å·¥ä½œç›®å½•ä¸‹package.jsoné‡Œçš„nameé…ç½®ã€‚

Options:
  -p, --prefix [prefix]        é¡¹ç›®æ‰€åœ¨åˆ†ç»„ã€‚
  -n, --name [codename]        é¡¹ç›®æ‰€åœ¨åˆ†ç»„ã€‚
  -g, --group [group]          é¡¹ç›®æ‰€åœ¨åˆ†ç»„ã€‚
  --allow-sourcemap [boolean]  æ˜¯å¦å…è®¸ä¸Šä¼ .mapæ–‡ä»¶ï¼Œé»˜è®¤ç¦æ­¢ä¸Šä¼ ã€‚
  -h, --help                   output usage information
```
<img src="doc/images/keke-publish.png" width="600px"/>

### release

``` bash
$ keke release -h
Usage: release [options]

å°†é¡¹ç›®å¿«ç…§å‘å¸ƒåˆ°çº¿ä¸Šç¯å¢ƒã€‚nameä¸ºé¡¹ç›®å

Options:
  -n, --name [codename]  é¡¹ç›®å
  -g, --group [group]    é¡¹ç›®æ‰€åœ¨åˆ†ç»„
  --prod [boolean]       å‘å¸ƒåˆ°prodç¯å¢ƒï¼Œå¦‚æœä¸å¼€å¯æ­¤é¡¹é…ç½®å°†é»˜è®¤å‘å¸ƒåˆ°betaç¯å¢ƒ
  --hash [hash]          ä½¿ç”¨historyå‘½ä»¤æŸ¥è¯¢ç‰ˆæœ¬å‘å¸ƒå†å²ï¼Œå¡«å†™å¿«ç…§hashç”¨æ¥å¿«é€Ÿå›æ»šï¼Œç•™ç©ºä»¥å‘å¸ƒæœ€æ–°çš„ç‰ˆæœ¬ã€‚
  -h, --help             output usage information
```

ç¤ºä¾‹ï¼š
``` bash
$ keke release fe-test2 --hash f863c2c17980f0b42469f3a15e557f90 -e prod
```
<img src="doc/images/keke-release.png" width="600px"/>


### history

``` bash
$ keke history -h
Usage: history [options]

æŸ¥çœ‹é¡¹ç›®çš„å‘å¸ƒå†å²ã€‚nameä¸ºé¡¹ç›®åï¼Œå¦‚æœä¸å¡«å†™å°†ä½¿ç”¨package.jsoné‡Œçš„nameé…ç½®ã€‚

Options:
  -n, --name [codename]  é¡¹ç›®å
  -g, --group [group]    é¡¹ç›®æ‰€åœ¨åˆ†ç»„
  -l --limit [limit]     æŸ¥è¯¢æ•°ç›®é™åˆ¶ã€‚
  -h, --help             output usage information
```

ç¤ºä¾‹ï¼š
``` bash
$ keke history test-mingxin -l 10
```

## kekeæ˜¯è°

``` bash
$ keke meow
```
<img src="doc/images/keke-meow.png" width="600px"/>

> ç§‘ç§‘çˆ±ä½ å“Ÿâ¤ï¸
<!-- <img src="doc/images/keke-rabbit.jpeg" width="300px"/> -->
